<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tzainten - Data Tables</title>

    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="/lib/vs2015.min.css">
    <link rel="stylesheet" href="/lib/flickity/flickity.min.css">
    <link rel="stylesheet" media="screen and (min-width: 721px)" href="/style.desktop.min.css?v=2502068962651119175653384491556136878058411543708298" />
    <link rel="stylesheet" media="screen and (max-width: 720px)" href="/style.mobile.min.css?v=2502068962651119175653384491556136878058411543708298" />

    <script src="/lib/flickity/flickity.pkgd.min.js" ></script>

    <meta name="description" content="A tool built for s&box that adds similar functionality as Data Tables in Unreal Engine">

    <meta property="og:title" content="tzainten - Data Tables">
    <meta property="og:description" content="A tool built for s&box that adds similar functionality as Data Tables in Unreal Engine">
    <meta property="og:image" content="https://tzainten.github.io/images/avatar.jpg">
    <meta property="og:url" content="https://tzainten.github.io/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="tzainten.github.io">
</head>

<body style="visibility: hidden;">
<div class="body-container">
<div class="page-container">

<div class="masthead fade-me-in">
    <img class="avatar" src="/images/avatar.jpg">
    <div class="card-container">
        <div>
            <h1>Hi, I'm <span class="username">tzainten</span>. I like coding.</h1>
        </div>
        <div class="social-links">
            <a href="https://github.com/tzainten/" class="social-button">
                <img src="/images/github.png" width="32" height="32">
            </a>
            <a href="https://steamcommunity.com/id/tzainten" class="social-button"> 
                <img src="/images/steam.png" width="32" height="32">
            </a>
            <a href="https://discord.com/users/608055742473175040" class="social-button"> 
                <img src="/images/discord.png" width="32" height="32">
            </a>
        </div>
    </div>
    <div class="location">
        <div style="display: flex; align-items: center; flex-direction: row; gap: 10px;">
            <img src="/images/usa.png" height="32" />
            <p style="white-space: nowrap;">United States</p>
        </div>
        <div class="time">
            <p id="timeZone" style="white-space: nowrap;"></p>
        </div>
    </div>
</div>

<div class="fade-me-in quick spacer"></div>

<div class="fade-me-in" style="display: flex; flex-direction: column;">

<div class="fade-me-in" style="display: flex; flex-direction: column;">
<div class="breadcrumbs">
    <a href="/">Home</a>
	/
	<a href="/projects/">Projects</a>
	/
	<p>Data Tables</p>
</div>
</div>

<div class="project-banner">
    <video class="fit-video noclick" preload="none" autoplay loop muted playsinline>
        <source src="videos/backdrop.mp4" type="video/mp4">
    </video>
    <div class="backdrop"></div>
    <img style="position: absolute; width: 100%;" src="images/logowide.png" alt="">
</div>
<div class="project-container">
    <div class="project-text">
        <div class="fade-me-in">
    <div style="display: flex; flex-direction: row; align-items: center;">
        <span class="title" style="white-space: nowrap; width: fit-content; margin-right: 10px;">DEVELOPMENT INFO</span>
        <div class="spacer"></div>
    </div>
    <div class="project-info">
        
                        <div class="project-info-slot">
                            <p style="width: 100%">Role: <span style="color: rgba(255, 255, 255, 0.6);">Sole Developer</span></p>
                        </div>
                    
        
                        <div class="project-info-slot">
                            <p class="project-info-right" style="width: 100%;">Development Time: <span style="color: rgba(255, 255, 255, 0.6);">1 month</span></p>
                        </div>
                    
    </div>
    <div class="project-info">
        
                        <div class="project-info-slot">
                            <div style="display: flex; flex-direction: row; gap: 5px;">
                                <p style="display: flex; align-items: center; width: 100%">Tools: </p>
                                <div class="tooltip">
                        <a href="https://learn.microsoft.com/en-us/dotnet/csharp/">
                        <img class="social-button" height=24 src="/images/cs.png" style="border-radius: 6px" />
                        </a>
                        <span class="tooltiptext">C#</span>
                        </div>
                        <div class="tooltip">
                        <a href="https://sbox.game/dev/doc/">
                        <img class="social-button" height=24 src="/images/sbox.png" style="border-radius: 6px" />
                        </a>
                        <span class="tooltiptext">s&box</span>
                        </div>
                        <div class="tooltip">
                        <a href="https://git-scm.com/doc">
                        <img class="social-button" height=24 src="/images/git.png" style="border-radius: 6px" />
                        </a>
                        <span class="tooltiptext">Git</span>
                        </div>
                        
                            </div>
                        </div>
                    
        
                        <div class="project-info-slot">
                            <p class="project-info-right" style="width: 100%;">Source: <a href="https://github.com/tzainten/DataTables">GitHub</a>, <a href="https://sbox.game/tzainten/datatables">s&amp;box</a>
</p>
                        </div>
                    
    </div>
</div>
        
        <div class="fade-me-in">
            <div style="display: flex; flex-direction: row; align-items: center;">
                <span class="title" style="white-space: nowrap; width: fit-content; margin-right: 10px;">DESCRIPTION</span>
                <div class="spacer"></div>
            </div>

            <p class="project-summary">A tool built for s&box that adds similar functionality as Data Tables in Unreal Engine</p>
            <div class="project-body">
                <h3>The Goal</h3>
<p>s&amp;box hosted a <a href="https://sbox.game/news/techjam1-726b8bbf">Tech Jam</a> at the end of 2024. This event's main goal was for participants to work on whatever they found interesting, and this is what I decided to work on!</p>
<h3>Starting Out</h3>
<p>Coming from Unreal Engine 5, I wondered how Data Tables would work in s&amp;box. In Unreal Engine, I used Data Tables to setup different spells in a side project I was working on.</p>
<p>Data Tables are assets that you create in the editor. They hold multiple rows of a struct type that you define yourself. For example:</p>
<pre class="shiki dark-plus" style="color:#D4D4D4" tabindex="0"><code class="language-c#"><span class="line"><span style="color:#569CD6">struct</span><span style="color:#4EC9B0"> Item</span></span>
<span class="line"><span style="color:#D4D4D4">{</span></span>
<span class="line"><span style="color:#569CD6">    public</span><span style="color:#4EC9B0"> Texture</span><span style="color:#9CDCFE"> Icon</span><span style="color:#D4D4D4"> { </span><span style="color:#569CD6">get</span><span style="color:#D4D4D4">; </span><span style="color:#569CD6">set</span><span style="color:#D4D4D4">; }</span></span>
<span class="line"><span style="color:#569CD6">    public</span><span style="color:#569CD6"> string</span><span style="color:#9CDCFE"> Name</span><span style="color:#D4D4D4"> { </span><span style="color:#569CD6">get</span><span style="color:#D4D4D4">; </span><span style="color:#569CD6">set</span><span style="color:#D4D4D4">; }</span></span>
<span class="line"><span style="color:#569CD6">    public</span><span style="color:#569CD6"> string</span><span style="color:#9CDCFE"> Description</span><span style="color:#D4D4D4"> { </span><span style="color:#569CD6">get</span><span style="color:#D4D4D4">; </span><span style="color:#569CD6">set</span><span style="color:#D4D4D4">; }</span></span>
<span class="line"><span style="color:#D4D4D4">}</span></span></code></pre>
<h3>The Journey</h3>
<p>I had my first working version of the tool at the end of Week 1. It was very bare bones, and was not at all ready to be used seriously.</p>
<p><video class="fit-video" src="media/week1.mp4#t=0.1" type="video/mp4" preload="metadata" controls muted></video></p>
<p>There was still a couple of things missing that I wanted to add:</p>
<ul>
<li>Hotloading Support</li>
<li>Undo System</li>
<li>Proper Saving Dialogs</li>
</ul>
<h3>JSON Serialization</h3>
<p>Unfortunately for me, s&amp;box doesn't automatically serialize the type of an object. This wasn't going to work for my tool, so I had to implement my own solution!</p>
<p>Luckily though, this was pretty straight forward. All I had to do was use simple recursion, iterate over an object's properties and fields, and use the built in Json.ToNode provided by s&amp;box.</p>
<pre class="shiki dark-plus" style="color:#D4D4D4" tabindex="0"><code class="language-json"><span class="line"><span style="color:#CE9178">"StructEntries"</span><span style="color:#D4D4D4">: [</span></span>
<span class="line"><span style="color:#D4D4D4">{</span></span>
<span class="line"><span style="color:#9CDCFE">    "RowName"</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"NewEntry_0"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">    "List"</span><span style="color:#D4D4D4">: [</span></span>
<span class="line"><span style="color:#D4D4D4">    {</span></span>
<span class="line"><span style="color:#9CDCFE">        "Boolean"</span><span style="color:#D4D4D4">: </span><span style="color:#569CD6">true</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">        "__type"</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"Sandbox.B"</span></span>
<span class="line"><span style="color:#D4D4D4">    },</span></span>
<span class="line"><span style="color:#D4D4D4">    {</span></span>
<span class="line"><span style="color:#9CDCFE">        "Integer"</span><span style="color:#D4D4D4">: </span><span style="color:#B5CEA8">55</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">        "__type"</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"Sandbox.A"</span></span>
<span class="line"><span style="color:#D4D4D4">    }</span></span>
<span class="line"><span style="color:#D4D4D4">    ],</span></span>
<span class="line"><span style="color:#9CDCFE">    "__type"</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"Sandbox.ExampleStruct"</span></span>
<span class="line"><span style="color:#D4D4D4">},</span></span>
<span class="line"><span style="color:#D4D4D4">{</span></span>
<span class="line"><span style="color:#9CDCFE">    "RowName"</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"NewEntry_1"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">    "List"</span><span style="color:#D4D4D4">: [],</span></span>
<span class="line"><span style="color:#9CDCFE">    "__type"</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"Sandbox.ExampleStruct"</span></span>
<span class="line"><span style="color:#D4D4D4">},</span></span>
<span class="line"><span style="color:#D4D4D4">],</span></span></code></pre>
<h3>Hotloading</h3>
<p>Changes that you made in the tool were not being reflected in game until you restarted.</p>
<p>I also had to use reflection heavily here. I had already implemented my own JSON Serialization solution at this point, so I was well equipped to tackle this problem!</p>
<pre class="shiki dark-plus" style="color:#D4D4D4" tabindex="0"><code class="language-c#"><span class="line"><span style="color:#C586C0">for</span><span style="color:#D4D4D4"> ( </span><span style="color:#569CD6">int</span><span style="color:#9CDCFE"> i</span><span style="color:#D4D4D4"> = </span><span style="color:#B5CEA8">0</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4"> &#x3C; </span><span style="color:#9CDCFE">InternalEntries</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">Count</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">++ )</span></span>
<span class="line"><span style="color:#D4D4D4">{</span></span>
<span class="line"><span style="color:#569CD6">    var</span><span style="color:#9CDCFE"> internalRow</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">InternalEntries</span><span style="color:#D4D4D4">[</span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">];</span></span>
<span class="line"><span style="color:#569CD6">    var</span><span style="color:#9CDCFE"> row</span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE">_dataTable</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">StructEntries</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">Find</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">x</span><span style="color:#D4D4D4"> => </span><span style="color:#9CDCFE">x</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">RowName</span><span style="color:#D4D4D4"> == </span><span style="color:#9CDCFE">internalRow</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">RowName</span><span style="color:#D4D4D4"> );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">    if</span><span style="color:#D4D4D4"> ( </span><span style="color:#9CDCFE">row</span><span style="color:#569CD6"> is</span><span style="color:#569CD6"> not</span><span style="color:#569CD6"> null</span><span style="color:#D4D4D4"> )</span></span>
<span class="line"><span style="color:#D4D4D4">    {</span></span>
<span class="line"><span style="color:#6A9955">        // This is where the hotload actually happens</span></span>
<span class="line"><span style="color:#9CDCFE">        TypeLibrary</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">Merge</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">row</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">internalRow</span><span style="color:#D4D4D4"> );</span></span>
<span class="line"><span style="color:#D4D4D4">    }</span></span>
<span class="line"><span style="color:#C586C0">    else</span></span>
<span class="line"><span style="color:#D4D4D4">    {</span></span>
<span class="line"><span style="color:#C586C0">        if</span><span style="color:#D4D4D4"> ( </span><span style="color:#9CDCFE">_weakTable</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">TryGetValue</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">internalRow</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">RowName</span><span style="color:#D4D4D4">, </span><span style="color:#569CD6">out</span><span style="color:#4EC9B0"> WeakReference</span><span style="color:#9CDCFE"> weakReference</span><span style="color:#D4D4D4"> ) )</span></span>
<span class="line"><span style="color:#D4D4D4">        {</span></span>
<span class="line"><span style="color:#C586C0">            if</span><span style="color:#D4D4D4"> ( !</span><span style="color:#9CDCFE">weakReference</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">IsAlive</span><span style="color:#D4D4D4"> )</span></span>
<span class="line"><span style="color:#D4D4D4">            {</span></span>
<span class="line"><span style="color:#9CDCFE">                _weakTable</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">Remove</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">internalRow</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">RowName</span><span style="color:#D4D4D4"> );</span></span>
<span class="line"><span style="color:#9CDCFE">                _dataTable</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">StructEntries</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">Insert</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">TypeLibrary</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">Clone</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">internalRow</span><span style="color:#D4D4D4"> ) );</span></span>
<span class="line"><span style="color:#C586C0">                continue</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4EC9B0">            RowStruct</span><span style="color:#9CDCFE"> weakRow</span><span style="color:#D4D4D4"> = (</span><span style="color:#4EC9B0">RowStruct</span><span style="color:#D4D4D4">)</span><span style="color:#9CDCFE">weakReference</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">Target</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#6A9955">            // This is where the hotload actually happens</span></span>
<span class="line"><span style="color:#9CDCFE">            TypeLibrary</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">Merge</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">weakRow</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">internalRow</span><span style="color:#D4D4D4"> );</span></span>
<span class="line"><span style="color:#9CDCFE">            _dataTable</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">StructEntries</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">Insert</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">weakRow</span><span style="color:#D4D4D4"> );</span></span>
<span class="line"><span style="color:#C586C0">            continue</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE">        _dataTable</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">StructEntries</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">Insert</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">i</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">TypeLibrary</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">Clone</span><span style="color:#D4D4D4">( </span><span style="color:#9CDCFE">internalRow</span><span style="color:#D4D4D4"> ) );</span></span>
<span class="line"><span style="color:#D4D4D4">    }</span></span>
<span class="line"><span style="color:#D4D4D4">}</span></span></code></pre>
<p>I got a bit confused when implementing support for Collections, but after some thought and tinkering with it I ended up figuring that out too.</p>
<h3>Saving Dialogs</h3>
<p>Saving dialogs were fairly simple to implement. All I had to do was check if the serialized version of the asset had changed at any point, and then not let the user close the window until they decide what to do about it.</p>
<p><video class="fit-video" src="media/saving.mp4#t=0.1" type="video/mp4" preload="metadata" controls muted></video></p>
<h3>Undo System</h3>
<p>Implementing an Undo System was pretty tricky at first. A big problem I was running into was trying to get it to work with Nested Lists. The outer layer of a List would work just fine, but anything further wouldn't serialize properly.</p>
<p>I ended up looking at some of the tools s&amp;box provides, low-and-behold the Shader Graph has a generic Undo System that's pretty much plug and play!</p>
<p><video class="fit-video" src="media/undo.mp4#t=0.1" type="video/mp4" preload="metadata" controls muted></video></p>
<p>From what I understand, all it's doing is saving serialized states everytime you make a change. If you want to traverse to a specific state in the changelog, you just deserialize that state into your current instance of your tool and voila!</p>
<h3>Summary</h3>
<p>I'm really happy with how the tool turned out! I'm really proud of myself for pulling through and actually submitting this before the deadline.</p>
<p>Garry mentioned the idea of doing a VR specific jam in the future, which has me excited! I've been meaning to try out VR development, so having a VR centered jam would be the perfect opportunity!</p>
<p>You can view all of the submitted entries <a href="https://sbox.game/c/tech1/list">here.</a></p>

            </div>
        </div>
    </div>

    <div class="project-media fade-me-in">
        <video class="fit-video" style="border-radius: 16px; overflow: hidden" src="media/saving.mp4#t=0.1" type="video/mp4" preload="metadata" controls muted></video><video class="fit-video" style="border-radius: 16px; overflow: hidden" src="media/undo.mp4#t=0.1" type="video/mp4" preload="metadata" controls muted></video><video class="fit-video" style="border-radius: 16px; overflow: hidden" src="media/week1.mp4#t=0.1" type="video/mp4" preload="metadata" controls muted></video>
    </div>
    
    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div id="caption"></div>
    </div>
</div>

</div>

</div>
</div>




<script src="/lib/instantpage.min.js" type="module"></script>

<noscript><style>body { visibility: visible; }</style></noscript>
<script src="/script.js?v=250206896" defer></script>

<style>
    .flickity-button {
        background: linear-gradient(to right, #767BBD, #86A6C4);
        color: white;
    }

    .flickity-button:hover, .flickity-button:active {
        background: linear-gradient(to left, #F7374F, #88304E);
    }
</style>

</body>
</html>